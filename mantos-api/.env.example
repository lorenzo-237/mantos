# ===========================
# MANTOS API - Configuration
# ===========================
# Copier ce fichier vers .env.{NODE_ENV}.local et remplir avec vos valeurs
# Exemple: .env.development.local ou .env.production.local
#
# IMPORTANT: Ne jamais commiter les fichiers .env.*.local dans Git!

# ===========================
# SERVEUR
# ===========================
NODE_ENV=development
PORT=3000

# Format des logs: 'combined' (production) ou 'dev' (développement)
LOG_FORMAT=dev

# URL origin autorisée pour CORS (frontend Angular)
ORIGIN=http://localhost:4200

# Activer les credentials CORS
CREDENTIALS=true

# ===========================
# BASES DE DONNÉES
# ===========================

# MySQL - Base MantisBT (READ-ONLY)
# Format: mysql://user:password@host:port/database
DATABASE_URL="mysql://mantos_readonly:YOUR_PASSWORD@localhost:3306/mantisbt"

# PostgreSQL - Base Mantos (READ-WRITE)
# Format: postgresql://user:password@host:port/database
DATABASE_PG_URL="postgresql://mantos_admin:YOUR_PASSWORD@localhost:5432/mantos"

# ===========================
# APIs EXTERNES
# ===========================

# API MantisBT REST
# URL de base de l'API REST de votre instance MantisBT
MANTIS_API_URL=https://mantis.example.com/api/rest

# URL de base de MantisBT (pour liens dans l'interface)
MANTIS_URL=https://mantis.example.com

# API d'authentification externe (NOUVEAU SYSTÈME)
# Cette API gère l'authentification LDAP et retourne les tokens
EXTERNAL_AUTH_API_URL=https://auth.example.com

# API de conversion Markdown vers HTML (optionnel)
MD_TO_HTML_API_URL=https://md-converter.example.com

# ===========================
# SÉCURITÉ
# ===========================

# Clé secrète pour signer les JWT Mantos
# IMPORTANT: Générer une clé aléatoire forte en production!
# Commande: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
SECRET_KEY=your_super_secret_jwt_key_CHANGE_ME_IN_PRODUCTION

# Clé pour les tokens administrateur
# IMPORTANT: Générer une clé différente de SECRET_KEY!
ADMIN_KEY=your_admin_key_CHANGE_ME_IN_PRODUCTION

# ===========================
# LOGGING
# ===========================

# Répertoire de stockage des logs
LOG_DIR=./logs

# ===========================
# VARIABLES OBSOLÈTES (NE PLUS UTILISER)
# ===========================
# Les variables suivantes ne sont plus nécessaires depuis la migration
# vers l'authentification externe. Elles sont conservées ici pour référence.
#
# LDAP_USER=...
# LDAP_PASSWORD=...
# LDAP_SERVER=...
# LDAP_PORT=...
# LDAP_BASE=...
